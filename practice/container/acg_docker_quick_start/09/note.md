[Back to ACG Docker Quick Start](../main.md)

# Docker Container Volume
#### Def.)
Preferred mechanism of persisting data generated by a container or generated to be used by a container

#### Advantage)
* Can be used in multiple containers
* Can be stored in a remote host or a cloud provider
* New volumes can have their content prepopulated by a container.


<br>

### Hands-on
* Check that no container is running and the following three images are installed.
  ![](./images/001.png)

<br>

* Check if a volume exits
    ```
    docker volume ls
    ```
  ![](./images/002.png)

<br>

* Create a volume.
  ```
  docker volume create <volume_name>
  ```
  ![](./images/003.png)

<br>

* Create the volume's info.
  ```
  docker volume inspect <volume_name>
  ```
  ![](./images/004.png)
  * At local, check the directory that the docker volume is actually located at.
    ```
    sudo ls /var/lib/docker/volumes/<volume_name>
    ```
    ![](./images/005.png)

<br>

* Create a container and mount the volume to it.
* Use either --mount or -v
  * --mount
    ```
    docker container run -d --name <container_name> --mount source=<volume_name>,target=<destination_in_container> <image_name>
    ```
    ![](./images/006.png)
  * -v
    ```
    docker container run -d --name <container_name> -v <volume_name>:<destination_in_container> <image_name>
    ```
    ![](./images/007.png)

<br>

* Check if the volume is properly mounted to the container.
  ```
  docker container inspect <container_name>
  ```
  ![](./images/008.png)   
  ![](./images/009.png)   

<br><br>

### Experiment
Let's create some data in the volume using the containe
#### Settings
* Container : nginx
  ![](./images/010.png)
* Volume : devvolume
  * Mounted to nginx
  * Destination : /app   
  ![](./images/011.png)   
  ![](./images/012.png)   
  ![](./images/013.png)   

#### Hands on
* Execute nginx, attach to it, and create a file in the destination directory!
  ![](images/014.png)
* Check the volume in local.
  ![](images/015.png)
* Stop and remove the container and check if the volume still exists.
  ![](images/016.png)
* Start a new container, mount the volume to it.
  ![](images/017.png)   
  ![](images/018.png)   
* Check if its readable in the new container.
  ![](images/019.png)   
* Modify the file and check it in the local.
  ![](images/020.png)   


<br>


[Back to ACG Docker Quick Start](../main.md)