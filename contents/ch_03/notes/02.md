[Back to main](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study#readme)

# 3.2 Program Encodings

### Case Study) Compiling C programs in Unix
* Suppose we compile two C programs p1.c and p2.c 
```console
unix> gcc -O1 -o p p1.c p2.c
```
* Interpretation
  * gcc : GCC C compiler which is a default compiler on Linux
  * (option) -01 : Instructs the compiler to apply level-one optimization
    * Prop.) Increasing the level of optimization makes the final program run faster, but at a risk of increased compilation time and difficulties running debugging tools on the code.
    * Prop.) Increasing the level of optimization generates machines codes that more transformations were made from the original source code.
    * Prop.) level-two is desired in practice.

* What happens
    * The gcc command invokes a sequence of programs to turn the source code into executable code.
       1. The C preprocessor expands the source codes to include files(#include) and macros(#define).
       2. The compiler generates assembly-code versions of the two source files having names p1.s and p2.s.
       3. The assembler converts the assembly code into binary **object-code** files p1.o and p2.o.
       4. The linker merges these two object-code files along with code implementing library functions (e.g., printf) and generates the final **executable code** file p.
    * Here, the **object-code** and the **executable code** are two machine codes.
      * **object-code** contains binary representations of all of the instructions, but the addresses of global values are not yet filled in.
      * **executable code** is the exact form of code that is executed by the processor.

![](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study/blob/main/contents/ch_01/images/01_01_01_compilation_system.png)


## 3.2.1 Machine-Level Code
### Concept) instruction set architecture (ISA)
* Def.) ISA defines the followings
  * the processor state
  * the format of the instructions
  * the effect each of these instructions will have on the state

### Prop.) Two important abstract model for machine-level programming
1. ISA above
    * The processor hardware employ safeguards to ensure that the overall behavior matches the sequential operation dictated by the ISA.
2. virtual address
    * The memory addresses used by a machine-level program are virtual addresses, providing a memory model that appears to be a very large byte array.


### Concept) Parts of the processor state
* **program counter (PC)** indicates the address in memory of the next instruction to be executed.
  * In IA32, called %eip
* The **integer register file** contains eight named locations storing 32-bit values.
* The **condition code registers** hold status information about the most recently executed arithmetic or logical instruction.
* A set of floating-point registers store floating-point data.


### Prop.) Machine code views the memory as simply a large, byte-addressable array.
* Recall that C provides a model in which objects of different data types can be declared and allocated in memory.
  * int, float, unsigned, double, struct, etc
* In machine code, they are just contiguous collections of bytes.

### Prop.) The program memory contains the executable machine code for the program.
* Example Contents
  * information required by the operating system
  * a run-time stack for managing procedure calls and returns
  * blocks of memory allocated by the user (when malloc() function is called!)

### Prop.) At any given time, only limited subranges of virtual addresses are considered valid.
* ex)
  * Although the 32-bit addresses of IA32 potentially span a 4-gigabyte range of address values, a typical program will only have access to a few megabytes.


<p align="center">
  <img src="https://github.com/JoonHyeok-hozy-Kim/computer_systems_study/blob/main/contents/ch_02/images/02_01_10_shift_operations.png" width="30%">
</p>

[:orange_book: Practice Problem 2.16](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study/blob/main/contents/ch_02/problems/practice_problems.md#practice-problem-216)



### KEYWORDS
* machine-level code; instruction set architecture(ISA); program counter(IA32); integer register file; condition code registers; floating-point registers; program memory; 


[Back to main](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study#readme)