[Back to main](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study#readme)

# 3.9 Heterogeneous Data Structures

## 3.9.1 Structures

### Concept) C's *struct* data structure
* Def.) A data type that groups objects of possibly different types into a single object
* Props.) 
  * All of the components of a structure are stored in a contiguous region of memory.
  * A pointer to a structure is the address of its first byte.
  * The compiler maintains information about each structure type indicating the **byte offset** of each field.

### Ex.) struct Declaration
* In C declaration
  ```c
  struct rec {
    int i;
    int j;
    int a[3];
    int *p;
  }
  ```
* In memory rec is stored as...
  ![](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study/blob/main/contents/ch_03/images/03_09_01_struct_ex.png)

#### Tech.) Operations
1. Copy i to j
   * In C
     ```c
     void member_copy(struct rec *r){
         r->j = r->i;
     }
     ```
   * In assembly
     * Assume *r* is in %edx
     ```assembly
     movl   %edx, %eax
     movl   %eax, 4(%edx)
     ```
2. Generate the pointer value &(r->a[1])
   * In C
     ```c
     int* generate_pointer(struct rec *r){
         return &(r->a[1]);
     }
     ```
   * In assembly
     * Assume *r* is in %eax and *i* is in %edx
     ```assembly
     leal   8(%edx, %eax, 4), %eax    Set %eax to &(r->a[i])
     ```
3. Assign a pointer value
   * In C
     ```c
     void assign_pointer(struct rec *r){
         r->p = r->a[r->i + r->j];
     }
     ```
   * In assembly
     * Assume *r* is in %edx
     ```assembly
     movl   4(%edx), %eax           Get r->j
     addl   (%edx), %eax            Add r->i
     leal   8(%edx, %eax, 4), %eax  Compute &(r->a[r->i + r->j])
     movl   %eax, 20(%edx)          Store in r->p
     ```

[:orange_book: Practice Problem 3.39](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study/blob/main/contents/ch_03/problems/practice_problems.md#practice-problem-339)






### KEYWORDS
* struct; 


[Back to main](https://github.com/JoonHyeok-hozy-Kim/computer_systems_study#readme)